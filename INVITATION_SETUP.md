# Настройка системы приглашений

## Изменения в проекте

Добавлена новая модель `Invitation` (Приглашение) для персонализированного отображения имен гостей на сайте.

### Структура модели Invitation

- `uuid` - уникальный идентификатор для ссылки
- `guest_names` - имена гостей для отображения (текстовое поле)
- `is_plural` - флаг множественного числа (True/False)
- `created_at` - дата создания

## Шаги для применения изменений

### 1. Применить миграции базы данных

```bash
cd backend
python manage.py makemigrations
python manage.py migrate
```

### 2. Создать приглашения через Django Admin

```bash
# Если еще не создан суперпользователь
python manage.py createsuperuser

# Запустить сервер
python manage.py runserver
```

Зайдите в админ-панель: http://localhost:8000/admin/

### 3. Создание приглашений

В разделе "Приглашения" создайте новые записи:

#### Для одного гостя:
- **Имена гостей**: `Иван Иванов`
- **Множественное число**: ☐ (не отмечено)
- Система сгенерирует UUID автоматически

Результат на сайте: "Дорогой Иван Иванов!"

#### Для нескольких гостей:
- **Имена гостей**: `Иван и Мария Ивановы`
- **Множественное число**: ☑ (отмечено)

Результат на сайте: "Дорогие Иван и Мария Ивановы!"

### 4. Использование приглашений

После создания приглашения скопируйте его UUID из админ-панели.

Отправьте гостям персонализированную ссылку:
```
http://your-domain.com/?uuid=<UUID_ПРИГЛАШЕНИЯ>
```

Например:
```
http://localhost:5173/?uuid=550e8400-e29b-41d4-a716-446655440000
```

## API Endpoint

### GET /api/guests/invitations/by-uuid/{uuid}/

Возвращает информацию о приглашении:

```json
{
  "id": 1,
  "uuid": "550e8400-e29b-41d4-a716-446655440000",
  "guest_names": "Иван Иванов",
  "is_plural": false,
  "created_at": "2025-11-03T12:00:00Z"
}
```

## Как это работает на фронтенде

1. При загрузке страницы компонент `EventInfo` извлекает UUID из URL параметра
2. Отправляет запрос на бэкенд `/api/guests/invitations/by-uuid/{uuid}/`
3. Получает данные приглашения
4. Отображает персонализированное приветствие:
   - "Дорогой {имя}!" - для одного гостя
   - "Дорогие {имена}!" - для нескольких гостей

## Примеры использования

### Пример 1: Одиночное приглашение
```
Имена гостей: Петр Сидоров
Множественное число: Нет
Ссылка: /?uuid=abc-123
Результат: "Дорогой Петр Сидоров!"
```

### Пример 2: Семейное приглашение
```
Имена гостей: Петр и Анна Сидоровы
Множественное число: Да
Ссылка: /?uuid=def-456
Результат: "Дорогие Петр и Анна Сидоровы!"
```

### Пример 3: Группа друзей
```
Имена гостей: Алексей, Мария и Дмитрий
Множественное число: Да
Ссылка: /?uuid=ghi-789
Результат: "Дорогие Алексей, Мария и Дмитрий!"
```

## Заметки

- UUID генерируется автоматически при создании приглашения
- Модель `Guest` осталась без изменений и используется для формы подтверждения
- Если UUID не указан в URL, отображается стандартное приветствие "Дорогой Гость!"

